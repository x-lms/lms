<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
	<title>í•™ìŠµê´€ë¦¬ì‹œìŠ¤í…œ</title>
	<link rel="stylesheet" href="/css/common.css">
	<link rel="stylesheet" href="/css/layout.css">
	<link rel="stylesheet" href="/css/projectResultOne.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    {{>layouts/header}}
    <div class="container">
        {{>layouts/navProfessor}}
        <div class="main-content">
          
            {{#pr}}
            <div class="detail-container">
                <!-- í—¤ë” ì„¹ì…˜ -->
                <div class="detail-header">
                    <h3>{{resultTitle}}</h3>
                    <div class="submission-info">
                        ì œì¶œë²ˆí˜¸: {{resultNo}} | ì œì¶œì¼: {{createdate}}
                    </div>
                </div>

                <!-- ë³¸ë¬¸ ì„¹ì…˜ -->
                <div class="detail-body">
                    <!-- í•™ìƒ ì •ë³´ -->
                    <div class="info-card">
                        <div class="info-row">
                            <span class="info-label">í•™ìƒë²ˆí˜¸</span>
                            <span class="info-value">{{studentNo}}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">í•™ìƒì´ë¦„</span>
                            <span class="info-value">{{studentName}}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ì œì¶œì¼ì‹œ</span>
                            <span class="info-value">{{createdate}}</span>
                        </div>
                    </div>

                    <!-- ê²°ê³¼ë¬¼ ë‚´ìš© -->
                    <h4 class="section-subtitle">ì œì¶œìë£Œ</h4>
                    <div class="content-section">
                        {{resultContents}}
                    </div>

                    <!-- ì²¨ë¶€íŒŒì¼ -->
                    <div class="info-card">
                        <div class="info-row">
                            <span class="info-label">ì²¨ë¶€íŒŒì¼</span>
                            <span class="info-value">
                                {{#resultFile}}
                                    <a href="#" class="file-attachment">{{resultFile}}</a>
                                {{/resultFile}}
                                {{^resultFile}}
                                    <span class="text-muted">ì²¨ë¶€íŒŒì¼ ì—†ìŒ</span>
                                {{/resultFile}}
                            </span>
                        </div>
                    </div>

                    <!-- ì ìˆ˜ ë“±ë¡ -->
                    <div class="score-card">
                        <h4>ğŸ“ ê³¼ì œ ì ìˆ˜ ë“±ë¡</h4>
                        <form action="{{springMacroRequestContext.request.contextPath}}/professor/addResultScore" method="post" class="score-form">
                            <input type="number" id="resultScore" name="resultScore" class="score-input" placeholder="ì ìˆ˜ ì…ë ¥" 
                            	required min="0" max="20" value="{{#resultScore}}{{resultScore}}{{/resultScore}}{{^resultScore}}0{{/resultScore}}">
                            <input type="hidden" name="resultNo" value="{{resultNo}}">
                            <input type="hidden" name="projectNo" value="{{projectNo}}">
                            <button type="submit" class="btn-primary">ì ìˆ˜ ë“±ë¡</button>
                        </form>
                    </div>

                    <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                    <div class="button-group">
                        <a href="{{springMacroRequestContext.request.contextPath}}/professor/projectResultList?projectNo={{projectNo}}" class="btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
                    </div>
                </div>
            </div>
            {{/pr}}
        </div>
    </div>
    {{>layouts/footer}}
    
<script>
	$(document).ready(function() {
	    $('#resultScore').on('input', function() {
	        let maxScore = 20;
	        let minScore = 0;
	        let val = parseInt($(this).val());
	
	        if (isNaN(val)) {
	            $(this).val('');
	            return;
	        }
	
	        if (val > maxScore) {
	            $(this).val(maxScore);
	        } else if (val < minScore) {
	            $(this).val(minScore);
	        }
	    });
	});
</script>
</body>
</html>